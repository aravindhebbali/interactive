---
title: "Box Plot"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
knitr::opts_chunk$set(echo = FALSE)
mpg_split <- split(mtcars$mpg, mtcars$cyl)
```

## Introduction

The box plot is a standardized way of displaying the distribution of data based on the five number summary: minimum, first quartile, median, third quartile, and maximum. Box plots are useful for detecting outliers and for comparing distributions. It shows the shape, central tendancy and variability of the data.

### Structure

<hr>

- The body of the boxplot consists of a "box" (hence, the name), which goes from the first quartile (Q1) to the third quartile (Q3). 
- Within the box, a vertical line is drawn at the Q2, the median of the data set. 
- Two horizontal lines, called whiskers, extend from the front and back of the box. 
- The front whisker goes from Q1 to the smallest non-outlier in the data set, and the back whisker goes from Q3 to the largest non-outlier. 
- If the data set includes one or more outliers, they are plotted separately as points on the chart. 


### Agenda

<hr>

- create univariate/multivariate box plots
- interpret box plots
- create horizontal box plots
- detect outliers
- modify box color
- use formula to compare distributions of different variables
- use notches to compare medians


## Univariate Box Plot

### Introduction

<hr>

```{r box1, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Box Plot'}
boxplot(mtcars$mpg)
```

### Horizontal Box Plot

<hr>

```{r box2, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Horizontal Box Plot'}
boxplot(mtcars$mpg, horizontal = TRUE)
```

### Color

<hr>

```{r box3, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Color'}
boxplot(mtcars$mpg, col = 'blue')
```

### Border Color
 
<hr>

```{r box4, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Border Color'}
boxplot(mtcars$mpg, border = 'red')
```

### Range

<hr>

```{r box5, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Range'}
boxplot(mtcars$mpg, range = 0)
```

### Range

<hr>

```{r box6, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Range'}
boxplot(mtcars$mpg, range = 1)
```

### Range

<hr>

```{r box7, fig.align='center', fig.width=10, fig.height=7, echo=FALSE, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Range'}
init <- par(no.readonly = TRUE)
par(mfrow = c(2, 2))
values <- c(0, 0.25, 0.63, 1)
for (i in values) {
  boxplot(mtcars$mpg, range = i)
  mtext(paste("range = ", i), side = 3, col = "blue")
}
```

## Outliers

### Introduction

<hr>

```{r box8, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Outliers'}
boxplot(mtcars$mpg, range = 1, outline = FALSE)
```

### Outliers

<hr>

```{r box9, fig.align='center', fig.width=10, fig.height=7, echo=FALSE, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Outliers'}
init <- par(no.readonly = TRUE)
par(mfrow = c(1, 2))
values <- c(TRUE, FALSE)
for (i in values) {
  boxplot(mtcars$mpg, outline = i, range = 1)
  mtext(paste("outline = ", i), side = 3, col = "blue")
}
```

## Varwidth

<hr>

```{r box10, fig.align='center', fig.width=10, fig.height=7, echo=FALSE, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Varwidth'}
init <- par(no.readonly = TRUE)
par(mfrow = c(1, 2))
values <- c(TRUE, FALSE)
for (i in values) {
  boxplot(mtcars$mpg, varwidth = i, range = 1)
  mtext(paste("varwidth = ", i), side = 3, col = "blue")
}
```

## 2 Factor Box Plot

### Introduction

<hr>

```{r box11, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Box Plot'}
boxplot(mtcars$mpg ~ mtcars$cyl)
```

### Data

<hr>

```{r box12, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Data'}
mpg_split <- split(mtcars$mpg, mtcars$cyl)
mpg_split
```

### Box Plot

<hr>

```{r box13, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Box Plot'}
mpg_4 <- mpg_split$`4`
mpg_6 <- mpg_split$`6`
mpg_8 <- mpg_split$`8`
boxplot(mpg_4, mpg_6, mpg_8)
```

### Color

<hr>

```{r box14, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Color'}
boxplot(mtcars$mpg ~ mtcars$cyl, col = 'blue')
```

### Different Colors

<hr>

```{r box15, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Different Colors'}
boxplot(mtcars$mpg ~ mtcars$cyl, 
        col = c('red', 'blue', 'yellow'))
```

### Compare Medians

<hr>

```{r box16, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Compare Medians'}
hsb <- read.table('https://stats.idre.ucla.edu/wp-content/uploads/2016/02/hsb2-2.csv', header=T, sep=",")
boxplot(hsb$read ~ hsb$female, notch = TRUE, 
        col = c('red', 'blue'))
```

### Title & Axis Labels

<hr>

```{r box17, fig.align='center', fig.width=5, fig.height=5, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Title & Axis Labels'}
boxplot(mtcars$mpg ~ mtcars$cyl, range = 1, outline = TRUE, 
        horizontal = TRUE, col = c('red', 'blue', 'yellow'),
        main = 'Miles Per Gallon by Cylinders', 
        ylab = 'Number of Cylinders', xlab = 'Miles Per Gallon',
        names = c('Four', 'Six', 'Eight'))
```

