---
title: "Compare tibbles"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(tibble)
library(dplyr)
tutorial_options(exercise.timelimit = 0, exercise.cap = 'Sandbox')
knitr::opts_chunk$set(echo = FALSE)
```

## Introduction

<hr>

We can compare tibbles using the `all_equal()` function from the [dplyr](http://dplyr.tidyverse.org/) package. We need to specify the 
tibbles being compared. Let us look at an example from the web traffic data. We have the details of browsers used in 2 formats. We will 
test if they are the same.

```{r tibbles17, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Compare tibbles'}
browsers1 <- enframe(c(chrome = 40, firefox = 20, edge = 30, safari = 10))
browsers2 <- enframe(c(edge = 30, firefox = 20, safari = 10, chrome = 40))
all_equal(browsers1, browsers2)
```

## Ignore Row Order

<hr>

 The `all_equal()` function ignores the order of the rows while comparing the tibbles. Change this by setting 
`ignore_row_order` to `TRUE`.

```{r tibbles18, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Compare tibbles - Part 2'}
all_equal(browsers1, browsers2, ignore_row_order = FALSE)
```


## Column Order

<hr>

The order of the columns are ignored by default.

```{r tibbles19, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Compare tibbles - Part 3'}
traffic1 <- tibble(
  browsers = c('chrome', 'firefox', 'edge', 'safari'),
  visit = c(40, 20, 30, 10),
  source = c('search', 'social', 'direct', 'affiliates'),
  visits = c(35, 25, 10, 30)
)

traffic2 <- tibble(
  source = c('search', 'social', 'direct', 'affiliates'),
  visits = c(35, 25, 10, 30),
  browsers = c('chrome', 'firefox', 'edge', 'safari'),
  visit = c(40, 20, 30, 10)
)

all_equal(traffic1, traffic2)
```


## Ignore Column Order

<hr>

Set `ignore_col_order` to `FALSE` to compare the order of the columns.

```{r tibbles20, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Compare tibbles - Part 4'}
all_equal(traffic1, traffic2, ignore_col_order = FALSE)
```

## Miscellaneous

### Test objects

<hr>

We can test if an object is a tibble using the `is_tibble()` function.

```{r tibbles14, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Test Objects'}
is_tibble(mtcars)
is_tibble(as_tibble(mtcars))
```

### Glimpse

<hr>

Use the `glimpse()` function to get an overview of the data.

```{r tibbles29, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Glimpse'}
glimpse(mtcars)
```

### Column Exists

<hr>

The `has_name()` function can be used to check if a tibble has a specific column.

```{r tibbles30, exercise = TRUE, exercise.eval = FALSE, exercise.cap = 'Column Exists'}
has_name(mtcars, 'cyl')
has_name(mtcars, 'gears')
```

